{"version":3,"sources":["webpack:///webpack/bootstrap 67b8cbbb0fcfa5d8c5ca","webpack:///./src/index.js","webpack:///./src/file.js","webpack:///./src/_get-filereader-method-name.js","webpack:///./src/_read-files.js","webpack:///./src/dropfiles.js","webpack:///./src/dragover.js"],"names":["Matreshka","binders","file","dropFiles","dragOver","module","exports","createFileChangeHandler","callback","methodName","fileChangeHandler","files","length","readFiles","fileBinder","readAs","getFileReaderMethodName","on","addEventListener","destroy","removeEventListener","getValue","domEvent","multiple","setValue","window","FileReader","Error","toUpperCase","slice","prototype","fileReaderMethodName","arrayOfFiles","Array","j","createLoadendHandler","reader","loadendHandler","readerResult","result","i","createDropHandler","dropHandler","event","preventDefault","dataTransfer","createDragoverHandler","dragoverHandler","dropEffect","dropFilesBinder","eventType","type"],"mappings":"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","file":"matreshka-binders-file.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 67b8cbbb0fcfa5d8c5ca\n **/","/* globals Matreshka */\nimport file from './file';\nimport dropFiles from './dropfiles';\nimport dragOver from './dragover';\n\n// extend binders object in browser environment\nif (typeof Matreshka === 'function') {\n    const { binders } = Matreshka;\n\n    binders.file = file;\n    binders.dropFiles = dropFiles;\n    binders.dragOver = dragOver;\n}\n\n// export these binders in CJS environment\nmodule.exports = {\n    file,\n    dropFiles,\n    dragOver\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import getFileReaderMethodName from './_get-filereader-method-name';\nimport readFiles from './_read-files';\n\nfunction createFileChangeHandler({\n    callback,\n    methodName\n}) {\n    return function fileChangeHandler() {\n        const { files } = this;\n\n        if (files.length) {\n            readFiles(files, methodName, callback);\n        } else {\n            callback([]);\n        }\n    };\n}\n\nexport default function fileBinder(readAs) {\n    const methodName = readAs ? getFileReaderMethodName(readAs) : null;\n    let fileChangeHandler;\n\n    return {\n        on(callback) {\n            fileChangeHandler = createFileChangeHandler({\n                callback,\n                methodName\n            });\n            this.addEventListener('change', fileChangeHandler);\n        },\n        destroy() {\n            this.removeEventListener('change', fileChangeHandler);\n        },\n        getValue({ domEvent }) {\n            const files = domEvent || [];\n            return this.multiple ? files : files[0] || null;\n        },\n        setValue: null\n    };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/file.js\n **/","export default function getFileReaderMethodName(readAs) {\n    const { FileReader } = window;\n    /* istanbul ignore if  */\n    if (typeof FileReader === 'undefined') {\n        throw Error('FileReader is not supported by this browser');\n    }\n\n    const methodName = `readAs${readAs[0].toUpperCase()}${readAs.slice(1)}`;\n\n    if (!FileReader.prototype[methodName]) {\n        throw Error(`Method ${methodName} is not supported by FileReader`);\n    }\n\n    return methodName;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/_get-filereader-method-name.js\n **/","export default function readFiles(files, fileReaderMethodName, callback) {\n    const { length } = files;\n    const arrayOfFiles = Array(length);\n    let j = 0;\n\n    function createLoadendHandler({\n        file,\n        reader\n    }) {\n        return function loadendHandler() {\n            file.readerResult = reader.result; // eslint-disable-line no-param-reassign\n            j += 1;\n            if (j === length) {\n                callback(arrayOfFiles);\n            }\n\n            reader.removeEventListener('loadend', loadendHandler);\n        };\n    }\n\n    if (fileReaderMethodName) {\n        for (let i = 0; i < length; i += 1) {\n            const reader = new window.FileReader();\n            const file = files[i];\n\n            arrayOfFiles[i] = file;\n\n            reader.addEventListener('loadend', createLoadendHandler({\n                file,\n                reader\n            }));\n\n            reader[fileReaderMethodName](file);\n        }\n    } else {\n        for (let i = 0; i < length; i += 1) {\n            arrayOfFiles[i] = files[i];\n        }\n\n        callback(arrayOfFiles);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/_read-files.js\n **/","import getFileReaderMethodName from './_get-filereader-method-name';\nimport readFiles from './_read-files';\n\nfunction createDropHandler({\n    callback,\n    methodName\n}) {\n    return function dropHandler(event) {\n        event.preventDefault();\n        const files = event.dataTransfer.files;\n\n        if (files.length) {\n            readFiles(files, methodName, callback);\n        } else {\n            callback([]);\n        }\n    };\n}\n\nfunction createDragoverHandler() {\n    return function dragoverHandler(event) {\n        event.preventDefault();\n        event.dataTransfer.dropEffect = 'copy'; // eslint-disable-line no-param-reassign\n    };\n}\n\nexport default function dropFilesBinder(readAs) {\n    const methodName = readAs ? getFileReaderMethodName(readAs) : null;\n    let dropHandler;\n    let dragoverHandler;\n\n    return {\n        on(callback) {\n            dropHandler = createDropHandler({\n                callback,\n                methodName\n            });\n            dragoverHandler = createDragoverHandler();\n\n            this.addEventListener('drop', dropHandler);\n            this.addEventListener('dragover', dragoverHandler);\n        },\n        destroy() {\n            this.removeEventListener('drop', dropHandler);\n            this.removeEventListener('dragover', dragoverHandler);\n        },\n        getValue({ domEvent }) {\n            return domEvent || [];\n        },\n        setValue: null\n    };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/dropfiles.js\n **/","export default function dragOver() {\n    return {\n        on: 'dragover dragenter dragleave dragend drop',\n        getValue({ domEvent }) {\n            const eventType = domEvent && domEvent.type;\n\n            return eventType === 'dragover' || eventType === 'dragenter';\n        },\n        setValue: null\n    };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/dragover.js\n **/"],"sourceRoot":""}